■ 拡張プラグインやソースの分割について

なでしこ3には、拡張プラグインの仕組みがあります。拡張プラグインには、JavaScriptで書かれた「jsプラグイン」と、なでしこ3自身で書かれた「nako3プラグイン」の2種類があります。

●プラグインを取り込む方法

拡張プラグインを使うには、以下のように『!「プラグイン名」を取り込む』と記述します。

{{{
# 宣言
!「プラグインのファイル名」を取り込む

#
# ここにプラグインを使ったプログラム
#
}}}

●nako3プラグインの作り方

なでしこ3で[[関数を定義:文法/関数]]してください。すると、その関数をメインプログラムで利用できます。

以下はnako3プラグインの作成例です。「sub.nako3」という名前で保存しておきます。

{{{
# ファイル: sub.nako3
●AAAとは
　　1を戻す
ここまで。

●BBBとは
　　2を戻す
ここまで。
}}}

「sub.nako3」を使うプログラムです。

{{{
!「sub.nako3」を取り込む
3回
　　AAAを表示。# 結果: 「1」が表示される
ここまで。
}}}

▲現在実行しているのは、プラグインかメインプログラムかを判定

自作nako3プラグインを作る時、プラグイン内にはメインプログラムとプラグインのどちらを実行しているかを確認できます。拡張子「.nako3」のプラグインを取り込んだ時には、『[[プラグイン名:plugin_system/プラグイン名]]』がプラグインのパスとなります。


●jsプラグインの作り方

JavaScriptでモジュールを作ります。詳しい作り方は、[[こちら:FAQ/plugins]]をご覧ください。






